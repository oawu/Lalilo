/**
 * @author      OA Wu <oawu.tw@gmail.com>
 * @copyright   Copyright (c) 2015 - 2025, Lalilo
 * @license     http://opensource.org/licenses/MIT  MIT License
 * @link        https://www.ioa.tw/
 */

@use "sass:math";
@import "@/CSS3/Appearance";

@import "../_01-Var";
@import "../_02-Lib";

@import "Lalilo";

@mixin _color_align_wrap () {
  &._c-black {
    color: var(--ui-color-iOS-label);
  }

  &._c-gray {
    color: var(--ui-color-iOS-secondaryLabel);
  }

  &._c-red {
    color: var(--ui-color-iOS-systemRed);
  }

  &._c-orange {
    color: var(--ui-color-iOS-systemOrange);
  }

  &._c-yellow {
    color: var(--ui-color-iOS-systemYellow);
  }

  &._c-green {
    color: var(--ui-color-iOS-systemGreen);
  }

  &._c-blue {
    color: var(--ui-color-iOS-link);
  }

  &._c-purple {
    color: var(--ui-color-iOS-systemPurple);
  }

  &._c-brown {
    color: var(--ui-color-iOS-systemBrown);
  }

  &._c-white {
    color: white;
  }

  &._a-left {
    text-align: left;
  }

  &._a-center {
    text-align: center;
  }

  &._a-right {
    text-align: right;
  }

  &._w-yes {
    text-overflow: clip;
    white-space: pre-wrap;
    overflow: visible;
    word-wrap: break-word;
  }

  &._w-no {
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
  }

  &._s-yes {
    @include user-select(auto);
  }

  &._s-no {
    @include user-select(none);
  }

  &._b-yes {
    font-weight: bold;
  }

  &._b-no {
    font-weight: normal;
  }

  &._l-yes {
    font-size: small;
    padding: 2px 8px;
    position: relative;
    z-index: 1;

    &:before {
      content: '';

      position: absolute;
      z-index: -1;

      top: 0;
      left: 0;
      right: 0;
      bottom: 0;

      background-color: transparent;
      @include border-radius(8px);
    }
  }

  &._lc-click:before {
    background-color: var(--ui-color-iOS-quaternarySystemFill);
  }

  &._lc-black:before {
    background-color: var(--ui-color-iOS-label);
  }

  &._lc-gray:before {
    background-color: var(--ui-color-iOS-secondaryLabel);
  }

  &._lc-red:before {
    background-color: var(--ui-color-iOS-systemRed);
  }

  &._lc-orange:before {
    background-color: var(--ui-color-iOS-systemOrange);
  }

  &._lc-yellow:before {
    background-color: var(--ui-color-iOS-systemYellow);
  }

  &._lc-green:before {
    background-color: var(--ui-color-iOS-systemGreen);
  }

  &._lc-blue:before {
    background-color: var(--ui-color-iOS-link);
  }

  &._lc-purple:before {
    background-color: var(--ui-color-iOS-systemPurple);
  }

  &._lc-brown:before {
    background-color: var(--ui-color-iOS-systemBrown);
  }

}

.TableView {
  --section-padding-left: 16px;
  --section-padding-right: 16px;
  --section-radius: 12px;

  --create-size: 28px;
  --delete-size: 28px;
  --radio-size: 28px;

  --image-width: 36px;
  --image-height: 36px;
  --image-radius: 4px;

  --switch-with: 52px;
  --switch-height: 28px;

  --arrow-size: 10px;

  position: relative;

  display: inline-flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;

  width: 100%;
  overflow: hidden;
  background-color: transparent;

  > .TableSection {
    position: relative;

    display: inline-flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;

    width: 100%;
    margin-top: 16px;
    margin-bottom: 12px;

    padding: 0;
    padding-left: var(--section-padding-left);
    padding-right: var(--section-padding-right);

    > .header, > .footer {
      position: relative;
      z-index: 2;

      flex-shrink: 0;

      width: 100%;

      font-size: small;
      text-align: left;
    }

    > .header {
      padding-top: 4px;
      // padding-bottom: 4px;
      padding-left: calc(var(--section-radius) / 2 + 4px);
      padding-right: calc(var(--section-radius) / 2 + 4px);

      + .body {
        margin-top: 6px;
      }
      + .footer {
        padding-top: 8px;
      }
    }

    > .footer {
      padding-top: 4px;
      padding-left: calc(var(--section-radius) / 2 + 4px);
      padding-right: calc(var(--section-radius) / 2 + 4px);

      + .footer {
        padding-top: 0;
      }
      &:last-child {
        padding-bottom: 4px;
      }
    }

    > span {
      display: inline-block;
      text-align: left;
      @include user-select(none);

      &.header {
        color: var(--ui-color-iOS-secondaryLabel);
      }

      &.footer {
        color: var(--ui-color-iOS-secondaryLabel);
      }
    }

    > div.body {
      flex-grow: 1;

      position: relative;
      z-index: 1;

      display: inline-flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;

      width: 100%;
      background-color: var(--ui-color-iOS-secondarySystemGroupedBackground);
      overflow: hidden;
      @include border-radius(var(--section-radius));
    }

    > label.body {
      --header-top: 12px;
      --header-height: 18px;
      --header-bottom: 4px;

      --padding-top: 12px;
      --padding-bottom: 12px;
      --padding-left: 16px;
      --padding-right: 16px;

      --text-height-line: 23px;

      position: relative;

      display: inline-block;
      width: 100%;

      &:before {
        position: absolute;
        z-index: 2;

        left: 1px;
        top: 1px;
        right: 1px;

        height: calc(var(--header-top) + var(--header-height) + var(--header-bottom));
        background-color: var(--ui-color-iOS-secondarySystemGroupedBackground);
        @include border-top-radius(calc(var(--section-radius) - 1px));
      }

      &._title {
        > .title {
          display: inline-block;
        }

        > input, > textarea {
          padding-top: calc(var(--header-top) + var(--header-height) + var(--header-bottom));
          padding-bottom: calc(var(--padding-bottom) + 2px);

          padding-left: calc(var(--padding-left) + 2px);
          padding-right: calc(var(--padding-right) + 2px);
        }

        &._text {
          &:before {
            content: '';
          }
        }
      }

      > .title {
        position: absolute;
        z-index: 3;

        top: var(--header-top);
        left: var(--padding-left);
        right: var(--padding-right);

        display: none;
        height: var(--header-height);

        text-align: left;
        pointer-events: none;

        @include user-select(none);
        @include overflow-docx3();
      }

      > span.title {
        line-height: var(--header-height);
        font-size: small;

        &:before {
          display: inline-block;
          margin-right: 3px;
          color: var(--ui-color-iOS-systemRed);
        }

        &._required {
          &:before {
            content: 'ï¼Š';
          }
        }
      }

      > input, > textarea {
        flex-grow: 1;

        position: relative;
        z-index: 1;

        display: inline-block;

        width: 100%;
        margin: 0;
        padding-top: var(--padding-top);
        padding-bottom: var(--padding-bottom);
        padding-left: var(--padding-left);
        padding-right: var(--padding-right);

        color: var(--ui-color-iOS-label);
        font-size: large;
        font-family: $font-family;

        border: 1px solid transparent;
        background-color: var(--ui-color-iOS-secondarySystemGroupedBackground);

        @include box-shadow(none);
        @include appearance(none);
        @include border-radius(var(--section-radius));
        @include transition(box-shadow .16s ease-in-out, border-color .16s ease-in-out);

        @include input-placeholder {
          font-size: small;
          color: var(--ui-color-iOS-secondaryLabel);
          @include user-select(none);
        }

        &:focus {
          outline: 0;
        }

        &:not([readonly]):focus {
          border-color: var(--ui-color-iOS-link);
          @include box-shadow(0 0 0 3px var(--ui-color-macOS-keyboardFocusIndicatorColor));
        }

        &[readonly] {
          cursor: not-allowed;
          color: var(--ui-color-iOS-tertiaryLabel);
          background-color: var(--ui-color-iOS-quaternarySystemFill);
          @include box-shadow(none);
        }
      }

      > textarea {
        line-height: var(--text-height-line);
        min-height: calc(var(--header-top) + var(--header-height) + var(--header-bottom) + var(--text-height-line) * 3);

        resize: vertical;

        &[readonly] {
          resize: none;
        }
      }
    }

    > .body {
      > .TableCell {
        --first-paddingTop: 0px;
        --last-paddingBottom: 0px;

        flex-shrink: 0;

        position: relative;

        display: inline-flex;
        flex-direction: row;
        align-items: center;
        justify-content: flex-start;

        width: 100%;
        padding: 0;
        padding: 10px 16px;

        &:before {
          content: '';
          position: absolute;
          z-index: 1;

          top: 4px;
          left: 4px;
          right: 4px;
          bottom: 4px;

          background-color: transparent;
          @include transition(background-color .3s);
          @include border-radius(4px);
        }

        &:first-child {
          padding-top: calc(10px + (var(--section-radius) / 3));

          &:before {
            @include border-top-radius(calc(var(--section-radius) - 4px));
          }
        }

        &:last-child {
          padding-bottom: calc(10px + (var(--section-radius) / 3));

          &:before {
            @include border-bottom-radius(calc(var(--section-radius) - 4px));
          }
        }

        + .TableCell {
          margin-top: 1px;

          > .separator {
            display: inline-block;
          }
        }

        > label.create {
          @include hover {
            cursor: pointer;

            &:before, &:after {
              height: 4px;
              width: 60%;
            }
          }
        }

        > .create {
          flex-shrink: 0;

          position: relative;
          z-index: 2;

          display: inline-block;

          width: var(--delete-size);
          height: var(--delete-size);

          background-color: var(--ui-color-iOS-systemGreen);

          @include border-radius(50%);

          &:before, &:after {
            content: '';

            position: absolute;
            left: 50%;
            top: 50%;

            display: inline-block;
            width: 50%;
            height: 3px;

            background-color: white;
            @include border-radius(2px);
            @include transform(translate(-50%, -50%));
            @include transition(transform .3s, width .3s, height .3s);
          }

          &:after {
            @include transform(translate(-50%, -50%) rotate(90deg));
          }

          + .delete {
            margin-left: 12px;

            ~ .separator {
              left: calc(16px + var(--create-size) + 12px + var(--delete-size) + 12px + var(--image-width) + #{math.div(12px, 5) * 4});
            }

            + .radio {

              ~ .separator {
                left: calc(16px + var(--create-size) + 12px + var(--delete-size) + 12px + var(--image-width) + #{math.div(12px, 5) * 4});
              }

              + .image {
                ~ .separator {
                  left: calc(16px + var(--create-size) + 12px + var(--delete-size) + 12px + var(--radio-size) + 12px + var(--image-width) + #{math.div(12px, 5) * 4});
                }
              }
            }
          }

          + .radio {
            margin-left: 12px;

            ~ .separator {
              left: calc(16px + var(--delete-size) + 12px + var(--image-width) + #{math.div(12px, 5) * 4});
            }

            + .image {
              ~ .separator {
                left: calc(16px + var(--delete-size) + 12px + var(--radio-size) + 12px + var(--image-width) + #{math.div(12px, 5) * 4});
              }
            }
          }

          + .image {
            margin-left: 12px;

            ~ .separator {
              left: calc(16px + var(--delete-size) + 12px + var(--image-width) + #{math.div(12px, 5) * 4});
            }
          }

          + .ctx {
            margin-left: 12px;
          }

          ~ .separator {
            left: calc(16px + var(--radio-size) + #{math.div(12px, 5) * 4});
          }
        }

        > label.delete {
          @include hover {
            cursor: pointer;

            &:hover {

              &:before {
                @include transform(translate(-50%, -50%) rotate(45deg));
              }

              &:after {
                @include transform(translate(-50%, -50%) rotate(-45deg));
              }
            }
          }
        }

        > .delete {
          flex-shrink: 0;

          position: relative;
          z-index: 2;

          display: inline-block;

          width: var(--delete-size);
          height: var(--delete-size);

          background-color: var(--ui-color-iOS-systemRed);

          @include border-radius(50%);

          &:before, &:after {
            content: '';

            position: absolute;
            left: 50%;
            top: 50%;

            display: inline-block;
            width: 55%;
            height: 3px;

            background-color: white;
            @include border-radius(2px);
            @include transform(translate(-50%, -50%));
            @include transition(transform .3s);
          }

          + .radio {
            margin-left: 12px;

            ~ .separator {
              left: calc(16px + var(--delete-size) + 12px + var(--image-width) + #{math.div(12px, 5) * 4});
            }

            + .image {
              ~ .separator {
                left: calc(16px + var(--delete-size) + 12px + var(--radio-size) + 12px + var(--image-width) + #{math.div(12px, 5) * 4});
              }
            }
          }

          + .image {
            margin-left: 12px;

            ~ .separator {
              left: calc(16px + var(--delete-size) + 12px + var(--image-width) + #{math.div(12px, 5) * 4});
            }
          }

          + .ctx {
            margin-left: 12px;
          }

          ~ .separator {
            left: calc(16px + var(--radio-size) + #{math.div(12px, 5) * 4});
          }
        }

        > label.radio {
          @include hover {
            cursor: pointer;
          }
        }

        > .radio {
          flex-shrink: 0;

          position: relative;
          z-index: 2;

          display: inline-block;
          width: var(--radio-size);
          height: var(--radio-size);

          border: 1px solid var(--ui-color-iOS-separator);
          background-color: var(--ui-color-iOS-secondarySystemGroupedBackground);

          @include border-radius(50%);

          &:before, &:after {
            content: '';

            position: absolute;
            left: 50%;
            top: 50%;

            display: inline-block;
          }

          &:before {
            z-index: 1;

            width: calc(100% - 2px);
            height: calc(100% - 2px);

            background-color: var(--ui-color-iOS-secondarySystemGroupedBackground);
            @include border-radius(50%);
            @include transform(translate(-50%, -50%));
            @include transition(background-color .3s);
          }

          &:after {
            z-index: 2;

            width: 32%;
            height: 50%;

            border-right: 3px solid var(--ui-color-iOS-secondarySystemGroupedBackground);
            border-bottom: 3px solid var(--ui-color-iOS-secondarySystemGroupedBackground);
            @include border-bottom-right-radius(1px);
            @include transform(translate(-50%, calc(-50% - 1px)) rotate(40deg));
          }

          &._on {
            &:before {
              background-color: var(--ui-color-iOS-link);
            }
          }

          + .image {
            margin-left: 12px;

            ~ .separator {
              left: calc(16px + var(--radio-size) + 12px + var(--image-width) + #{math.div(12px, 5) * 4});
            }
          }

          + .ctx {
            margin-left: 12px;
          }

          ~ .separator {
            left: calc(16px + var(--radio-size) + #{math.div(12px, 5) * 4});
          }
        }

        > .image {
          flex-shrink: 0;

          position: relative;
          z-index: 2;

          width: var(--image-width);
          height: var(--image-height);

          + .ctx {
            margin-left: 12px;
          }

          ~ .separator {
            left: calc(16px + var(--image-width) + #{math.div(12px, 5) * 4});
          }
        }

        > figure.image {
          margin: 0;

          background-size: cover;
          background-position: center center;
          background-repeat: no-repeat;

          overflow: hidden;

          @include border-radius(var(--image-radius));
        }

        > .separator {
          position: absolute;
          z-index: 2;

          top: -1px;
          left: 16px;
          right: 0;

          display: none;

          height: 1px;

          border-top: 1px solid var(--ui-color-iOS-secondarySystemFill);
        }

        > .ctx {
          flex-grow: 1;

          position: relative;
          z-index: 2;

          min-width: 0;

          + .switch {
            margin-left: 12px;
          }

          + .arrow {
            margin-left: 8px;
          }

          > .back {
            display: inline-flex;
            flex-direction: row;
            align-items: center;
            justify-content: flex-start;

            width: 100%;

            color: var(--ui-color-iOS-link);
            @include user-select(none);

            &:before {
              content: '';
              display: inline-block;

              width: 8px;
              height: 8px;
              margin-right: 4px;

              border-top: 2px solid var(--ui-color-iOS-link);
              border-left: 2px solid var(--ui-color-iOS-link);

              @include opacity(.85);
              @include transform(rotate(-45deg));
            }
          }
        }

        > .ctx._tsv {
          display: inline-flex;
          flex-direction: row;
          align-items: center;
          justify-content: flex-start;

          > .key {
            flex-grow: 1;
            min-width: 0;

            display: inline-flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: flex-start;

            > .title {
              flex-shrink: 0;

              + .subtitle {
                margin-top: 2px;
              }
            }

            > .subtitle {
              flex-grow: 1;
            }

            > span.title {
              display: inline-block;
              width: 100%;

              @include _color_align_wrap;
            }

            > span.subtitle {
              display: inline-block;
              width: 100%;
              font-size: small;

              @include _color_align_wrap;
            }

            + .val {
              margin-left: 8px;
            }
          }

          > .val {
            flex-shrink: 0;
            max-width: 50%;

            display: inline-flex;
            flex-direction: column;
            align-items: flex-end;
            justify-content: flex-start;

            > .value {}

            > span.value {
              display: inline-block;
              max-width: 100%;

              @include _color_align_wrap;
            }
          }
        }

        > .ctx._ts {
          display: inline-flex;
          flex-direction: column;
          align-items: flex-start;
          justify-content: flex-start;

          > .title {
            flex-shrink: 0;

            + .subtitle {
              margin-top: 2px;
            }
          }

          > .subtitle {
            flex-grow: 1;
          }

          > span.title {
            display: inline-block;
            width: 100%;

            @include _color_align_wrap;
          }

          > span.subtitle {
            display: inline-block;

            width: 100%;
            font-size: small;

            @include _color_align_wrap;
          }
        }

        > .ctx._tv {
          display: inline-flex;
          flex-direction: row;
          align-items: center;
          justify-content: flex-end;

          > .title {
            flex-grow: 1;
            min-width: 0;

            + .val {
              margin-left: 8px;
            }
          }

          > .val {
            flex-shrink: 0;
            max-width: 75%;

            display: inline-flex;
            flex-direction: column;
            align-items: flex-end;
            justify-content: flex-start;

            > span.value {
              display: inline-block;
              max-width: 100%;
              @include _color_align_wrap;
            }
          }

          > span.title {
            @include _color_align_wrap;
          }
        }

        > .switch {
          position: relative;
          z-index: 2;

          display: inline-flex;
          flex-direction: row;
          align-items: center;
          justify-content: center;

          width: var(--switch-with);
          height: var(--switch-height);

          > label.ui {
            @include hover {
              cursor: pointer;
            }
          }

          > .ui {
            --x: 0;

            position: relative;

            display: inline-block;

            width: var(--switch-with);
            height: var(--switch-height);

            @include transition(box-shadow .3s);
            @include border-radius(calc(var(--switch-height) / 2));

            &:before, &:after {
              content: '';
              position: absolute;
              display: inline-block;
            }

            &:before {
              left: 0;
              top: 50%;

              width: var(--switch-with);
              height: var(--switch-height);

              background-color: var(--ui-color-iOS-tertiaryLabel);
              @include border-radius(calc(var(--switch-height) / 2));
              @include box-shadow(inset 1px 1px 1px rgba(0, 0, 0, 0.1), inset 0 0 1px rgba(0, 0, 0, 0.1));
              @include transition(background-color .3s, box-shadow .3s);
              @include transform(translateY(-50%));
            }

            &:after {
              left: 2px;
              top: 50%;

              width: calc(var(--switch-height) - #{2px * 2});
              height: calc(var(--switch-height) - #{2px * 2});

              background-color: white;
              @include border-radius(50%);
              @include box-shadow(0 1px 4px 0 rgba(0, 35, 11, .2));
              @include transform(translate(var(--x), -50%));
              @include transition(transform .16s ease-in-out, box-shadow .16s ease-in-out);
            }

            &._on {
              --x: calc(var(--switch-with) - var(--switch-height));

              &:before {
                background-color: var(--ui-color-iOS-systemGreen);
              }
            }
          }

          > .loading {
            position: relative;

            display: inline-block;
            width: var(--switch-height);
            height: var(--switch-height);

            i {
              --loading-color-1: var(--ui-color-iOS-secondarySystemFill);
              --loading-color-2: var(--ui-color-iOS-systemGray);

              position: absolute;

              left: 50%;
              top: 50%;

              display: inline-block;

              width: 2px;
              height: 6px;

              background-color: var(--ui-color-iOS-secondarySystemFill);

              @include border-radius(math.div(2px, 2));
              @include transform(translate(-50%, -50%));

              $cnt: 10;
              $deg: math.div(360deg, $cnt);
              $r: 8px;
              $s: math.div(0.5s, $cnt);

              @for $i from 0 through $cnt - 1 {
                &._i#{$i} {
                  @include transform(translate(calc(-50% + #{$r * math.sin($i * $deg)}), calc(-50% - #{$r * math.cos($i * $deg)})) rotate($i * $deg));
                  @include animation-delay($i * $s);
                }
              }

              @include animation(loading-rotate $cnt * $s linear infinite);
            }
          }

          + .arrow {
            margin-left: 6px;
          }
        }

        > .arrow {
          position: relative;
          z-index: 2;

          flex-shrink: 0;

          display: inline-block;
          width: var(--arrow-size);
          height: var(--arrow-size);

          border-top: 2px solid var(--ui-color-iOS-tertiaryLabel);
          border-right: 2px solid var(--ui-color-iOS-tertiaryLabel);

          @include transform(rotate(45deg));
        }
      }

      > button.TableCell, > label.TableCell {
        @include hover {
          cursor: pointer;

          &:hover {
            &:before {
              background-color: var(--ui-color-iOS-quaternarySystemFill);
            }

            &._no-multi-click {
              > .create {

                &:before, &:after {
                  height: 4px;
                  width: 60%;
                }
              }

              > .delete {
                &:before {
                  @include transform(translate(-50%, -50%) rotate(45deg));
                }

                &:after {
                  @include transform(translate(-50%, -50%) rotate(-45deg));
                }
              }
            }
          }
        }

        &:active {
          &:before {
            background-color: var(--ui-color-iOS-tertiarySystemFill);
          }
        }

        &._active {
          &:before {
            background-color: var(--ui-color-iOS-secondarySystemFill);
          }
        }
      }

      > button.TableCell {
        border: 0;
        background-color: transparent;

        font-size: medium;
        font-family: $font-family;
      }
      + .footer {
        margin-top: 2px;
      }
    }

    &._horizontal {
      $space: 16px;
      $min-width: 200px;

      > .body {
        display: inline-flex;
        flex-direction: row;
        align-items: center;
        justify-content: flex-start;
        flex-wrap: wrap;

        background-color: transparent;

        container-type: inline-size;

        > .TableCell {
          width: auto;

          background-color: var(--ui-color-iOS-secondarySystemGroupedBackground);

          @include border-radius(var(--section-radius));
          &:before {
            @include border-radius(calc(var(--section-radius) - 4px));
          }

          &:first-child {
            padding-top: 10px;
          }

          &:last-child {
            padding-bottom: 10px;
          }

          + .TableCell {
            margin-top: 0;
          }

          > .separator {
            display: none;
          }
        }
      }

      &[n="1"] {
        > .body {
          > .TableCell {
            width: calc((100% - #{$space} * (1 - 1)) / 1);
            + .TableCell {
              margin-top: $space;
            }
          }
        }
      }
      &[n="2"] {
        > .body {
          @include container-width(0, ($min-width + $space) * (2 - 1) + $min-width) {
            > .TableCell {
              width: calc((100% - #{$space} * (1 - 1)) / 1);
              + .TableCell {
                margin-top: $space;
              }
            }
          }
          @include container-width(($min-width + $space) * (2 - 1) + $min-width) {
            > .TableCell {
              margin-right: $space;
              width: calc((100% - #{$space} * (2 - 1)) / 2);
              &:nth-child(2n + 2) {
                margin-right: 0;
              }
            }
          }
        }
      }
      &[n="3"] {
        > .body {
          @include container-width(0, ($min-width + $space) * (2 - 1) + $min-width) {
            > .TableCell {
              width: calc((100% - #{$space} * (1 - 1)) / 1);
              + .TableCell {
                margin-top: $space;
              }
            }
          }
          @include container-width(($min-width + $space) * (2 - 1) + $min-width, ($min-width + $space) * (3 - 1) + $min-width) {
            > .TableCell {
              margin-right: $space;
              &:nth-child(1) {
                width: 100%;
              }
              &:nth-child(n + 2) {
                margin-top: $space;
                width: calc((100% - #{$space} * (2 - 1)) / 2);
              }
              &:nth-child(2n + 3) {
                margin-right: 0;
              }
            }
          }
          @include container-width(($min-width + $space) * (3 - 1) + $min-width) {
            > .TableCell {
              margin-right: $space;
              width: calc((100% - #{$space} * (3 - 1)) / 3);
              &:nth-child(3n + 3) {
                margin-right: 0;
              }
            }
          }
        }
      }
      &[n="4"] {
        > .body {
          @include container-width(0, ($min-width + $space) * (2 - 1) + $min-width) {
            > .TableCell {
              width: calc((100% - #{$space} * (1 - 1)) / 1);
              + .TableCell {
                margin-top: $space;
              }
            }
          }
          @include container-width(($min-width + $space) * (2 - 1) + $min-width, ($min-width + $space) * (4 - 1) + $min-width) {
            > .TableCell {
              margin-right: $space;
              width: calc((100% - #{$space} * (2 - 1)) / 2);
              &:nth-child(n + 3) {
                margin-top: $space;
              }
              &:nth-child(2n + 2) {
                margin-right: 0;
              }
            }
          }
          @include container-width(($min-width + $space) * (4 - 1) + $min-width) {
            > .TableCell {
              margin-right: $space;
              width: calc((100% - #{$space} * (4 - 1)) / 4);
              &:nth-child(4n + 4) {
                margin-right: 0;
              }
            }
          }
        }
      }
      &[n="5"] {
        > .body {
          @include container-width(0, ($min-width + $space) * (2 - 1) + $min-width) {
            > .TableCell {
              width: calc((100% - #{$space} * (1 - 1)) / 1);
              + .TableCell {
                margin-top: $space;
              }
            }
          }
          @include container-width(($min-width + $space) * (2 - 1) + $min-width, ($min-width + $space) * (3 - 1) + $min-width) {
            > .TableCell {
              margin-right: $space;
              &:nth-child(1) {
                width: calc((100% - #{$space} * (1 - 1)) / 1);
              }

              &:nth-child(n + 2) {
                margin-top: $space;
                width: calc((100% - #{$space} * (2 - 1)) / 2);
              }

              &:nth-child(2n + 3) {
                background-color: rgba(0, 0, 255, 0.2);
                margin-right: 0;
              }
            }
          }
          @include container-width(($min-width + $space) * (3 - 1) + $min-width, ($min-width + $space) * (5 - 1) + $min-width) {
            > .TableCell {
              margin-right: $space;
              &:nth-child(-n + 2) {
                width: calc((100% - #{$space} * (2 - 1)) / 2);
              }
              &:nth-child(n + 3) {
                margin-top: $space;
                width: calc((100% - #{$space} * (3 - 1)) / 3);
              }
              &:nth-child(2), &:nth-child(5) {
                margin-right: 0;
              }
            }
          }
          @include container-width(($min-width + $space) * (5 - 1) + $min-width) {
            > .TableCell {
              width: calc((100% - #{$space} * (5 - 1)) / 5);
              margin-right: $space;
              &:nth-child(5n + 5) {
                margin-right: 0;
              }
            }
          }
        }
      }
      &[n="6"] {
        > .body {
          @include container-width(0, ($min-width + $space) * (3 - 1) + $min-width) {
            > .TableCell {
              width: calc((100% - #{$space} * (1 - 1)) / 1);
              + .TableCell {
                margin-top: $space;
              }
            }
          }
          @include container-width(($min-width + $space) * (2 - 1) + $min-width, ($min-width + $space) * (3 - 1) + $min-width) {
            > .TableCell {
              width: calc((100% - #{$space} * (2 - 1)) / 2);
              margin-right: $space;
              &:nth-child(n + 3) {
                margin-top: $space;
              }
              &:nth-child(2n + 2) {
                margin-right: 0;
              }
            }
          }
          @include container-width(($min-width + $space) * (3 - 1) + $min-width, ($min-width + $space) * (6 - 1) + $min-width) {
            > .TableCell {
              width: calc((100% - #{$space} * (3 - 1)) / 3);
              margin-right: $space;
              &:nth-child(n + 4) {
                margin-top: $space;
              }
              &:nth-child(3n + 3) {
                margin-right: 0;
              }
            }
          }
          @include container-width(($min-width + $space) * (6 - 1) + $min-width) {
            > .TableCell {
              width: calc((100% - #{$space} * (6 - 1)) / 6);
              margin-right: $space;
              &:nth-child(6n + 6) {
                margin-right: 0;
              }
            }
          }
        }
      }
    }
  }
}
